<!DOCTYPE html>
<html>
<head>
    <title>HKIMD Scores</title>
    <style>
        /* Set the size of the div element that contains the map */
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h3>Check multiple deprivation score (HKIMD Score) at any location in Hong Kong</h3>
    <!-- The div element that will hold the map -->
    <div id="map"></div>
    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 11,
                center: {lat: 22.3193, lng: 114.1694},
                mapTypeId: 'satellite'
            });

            // Load GeoJSON data from a file in your GitHub repository
            map.data.loadGeoJson('https://raw.githubusercontent.com/Ruhamahchen/HKIMD-Scores/main/HKIMD-scores.geojson');

            // Set the style of the GeoJSON features
            map.data.setStyle({
                fillColor: 'green',
                strokeWeight: 1
            });

            // Add labels to the GeoJSON features
            map.data.addListener('addfeature', function(e) {
                var feature = e.feature;
                var geometry = feature.getGeometry();
                var bounds = new google.maps.LatLngBounds();

                // Calculate the bounds of the MultiPolygon
                geometry.getArray().forEach(function(polygon) {
                    polygon.getArray().forEach(function(path) {
                        path.getArray().forEach(function(latlng) {
                            bounds.extend(latlng);
                        });
                    });
                });

                var marker = new google.maps.Marker({
                    position: bounds.getCenter(),
                    map: map,
                    label: String(feature.getProperty('HKIMD')), // Convert the property to a string
                    clickable: false
                });
            });
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDXWyu1el9Ja7WVcktl77--OL6lpPWjojY&callback=initMap"></script>
</body>
</html>
